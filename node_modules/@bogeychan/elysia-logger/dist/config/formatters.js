import { serializeRequest } from "./serializers.js";
export const formatters = {
    log(object) {
        if (isContext(object)) {
            const log = {
                request: object.request,
            };
            if (object.isError) {
                const { code, error } = object;
                log.code = code;
                if ("message" in error) {
                    log.message = error.message;
                }
                else if ("code" in error && "response" in error) {
                    log.message = `HTTP ${error.code}: ${error.response}`;
                }
                else {
                    log.message = "Unknown error";
                }
            }
            else {
                if (object.store.responseTime) {
                    log.responseTime = object.store.responseTime;
                }
            }
            return log;
        }
        else if (isRequest(object)) {
            return serializeRequest(object);
        }
        return object;
    },
};
export function isContext(object) {
    const context = object;
    switch (undefined) {
        case context.request:
        case context.store:
        case context.isError:
            return false;
    }
    return true;
}
export function isRequest(object) {
    const request = object;
    switch (undefined) {
        case request.url:
        case request.method:
            return false;
    }
    return true;
}
